"use strict";(self.webpackChunklaravel_workflow=self.webpackChunklaravel_workflow||[]).push([[6957],{3905:(e,r,t)=>{t.d(r,{Zo:()=>u,kt:()=>y});var o=t(7294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,o,n=function(e,r){if(null==e)return{};var t,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=o.createContext({}),c=function(e){var r=o.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},u=function(e){var r=c(e.components);return o.createElement(s.Provider,{value:r},e.children)},f="mdxType",p={inlineCode:"code",wrapper:function(e){var r=e.children;return o.createElement(o.Fragment,{},r)}},d=o.forwardRef((function(e,r){var t=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),f=c(t),d=n,y=f["".concat(s,".").concat(d)]||f[d]||p[d]||a;return t?o.createElement(y,i(i({ref:r},u),{},{components:t})):o.createElement(y,i({ref:r},u))}));function y(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var a=t.length,i=new Array(a);i[0]=d;var l={};for(var s in r)hasOwnProperty.call(r,s)&&(l[s]=r[s]);l.originalType=e,l[f]="string"==typeof e?e:n,i[1]=l;for(var c=2;c<a;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},2906:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>i,default:()=>f,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=t(7462),n=(t(7294),t(3905));const a={sidebar_position:6},i="Failures and Recovery",l={unversionedId:"failures-and-recovery",id:"failures-and-recovery",title:"Failures and Recovery",description:"If a workflow fails or crashes then it can be resumed. To resume a failed workflow, you can use the resume method on the workflow instance. This will re-execute the failed activities in the workflow.",source:"@site/docs/failures-and-recovery.md",sourceDirName:".",slug:"/failures-and-recovery",permalink:"/docs/failures-and-recovery",draft:!1,editUrl:"https://github.com/laravel-workflow/laravel-workflow.github.io/edit/main/docs/failures-and-recovery.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Constraints Summary",permalink:"/docs/constraints/constraints-summary"}},s={},c=[{value:"Recovery Process",id:"recovery-process",level:2}],u={toc:c};function f(e){let{components:r,...t}=e;return(0,n.kt)("wrapper",(0,o.Z)({},u,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"failures-and-recovery"},"Failures and Recovery"),(0,n.kt)("p",null,"If a workflow fails or crashes then it can be resumed. To resume a failed workflow, you can use the resume method on the workflow instance. This will re-execute the failed activities in the workflow."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-php"},"use Workflow\\WorkflowStub;\n\n$workflow = WorkflowStub::load($workflowId);\n$workflow->resume();\n")),(0,n.kt)("p",null,"The default retry policy is to never fail and simply retry forever until the error is fixed. This is because the retry policy includes a backoff function which increases the delay between each retry attempt. This gives you time to fix the error without creating too many attempts."),(0,n.kt)("p",null,"There are two types of errors that can occur in a workflow: recoverable errors and non-recoverable errors. Recoverable errors are temporary and can be resolved without intervention, such as a timeout or temporary network failure. Non-recoverable errors require manual intervention, such as a deployment or code change."),(0,n.kt)("h2",{id:"recovery-process"},"Recovery Process"),(0,n.kt)("p",null,"The general process to fix a failing workflow is:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Check the logs for the activity that is failing and look for any errors or exceptions that are being thrown."),(0,n.kt)("li",{parentName:"ol"},"Identify the source of the error and fix it in the code."),(0,n.kt)("li",{parentName:"ol"},"Deploy the fix to the server where the queue is running."),(0,n.kt)("li",{parentName:"ol"},"Restart the queue worker to pick up the new code."),(0,n.kt)("li",{parentName:"ol"},"Monitor the activity to ensure that it is now completing successfully without errors."),(0,n.kt)("li",{parentName:"ol"},"If the activity continues to fail, repeat the process until the issue is resolved.")))}f.isMDXComponent=!0}}]);