"use strict";(self.webpackChunklaravel_workflow=self.webpackChunklaravel_workflow||[]).push([[7239],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(r),m=o,d=p["".concat(l,".").concat(m)]||p[m]||f[m]||a;return r?n.createElement(d,i(i({ref:t},c),{},{components:r})):n.createElement(d,i({ref:t},c))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},7517:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var n=r(7462),o=(r(7294),r(3905));const a={sidebar_position:3},i="Timers",s={unversionedId:"features/timers",id:"features/timers",title:"Timers",description:"Laravel Workflow provides the ability to suspend the execution of a workflow and resume at a later time. This can be useful for implementing delays, retry logic, or timeouts.",source:"@site/docs/features/timers.md",sourceDirName:"features",slug:"/features/timers",permalink:"/docs/features/timers",draft:!1,editUrl:"https://github.com/laravel-workflow/laravel-workflow.github.io/edit/main/docs/features/timers.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Queries",permalink:"/docs/features/queries"},next:{title:"Signal + Timer",permalink:"/docs/features/signal+timer"}},l={},u=[],c={toc:u};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"timers"},"Timers"),(0,o.kt)("p",null,"Laravel Workflow provides the ability to suspend the execution of a workflow and resume at a later time. This can be useful for implementing delays, retry logic, or timeouts."),(0,o.kt)("p",null,"To use timers, you can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"WorkflowStub::timer($seconds)")," method within your workflow. This method returns a ",(0,o.kt)("inlineCode",{parentName:"p"},"Promise")," that will be resolved after the specified number of seconds have passed."),(0,o.kt)("p",null,"Here is an example of using a timer:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"use Workflow\\WorkflowStub;\nuse Workflow\\Workflow;\n\nclass MyWorkflow extends Workflow\n{\n    public function execute()\n    {\n        // Wait for 5 seconds before continuing\n        yield WorkflowStub::timer(5);\n\n        // Do something after the timer has finished\n        return 'Hello world';\n    }\n}\n")),(0,o.kt)("p",null,"You may also specify the time to wait as a string e.g. '5 seconds' or '30 minutes'."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Important:")," When using timers, do not use ",(0,o.kt)("inlineCode",{parentName:"p"},"Carbon::now()")," to get the current time. Instead, use ",(0,o.kt)("inlineCode",{parentName:"p"},"WorkflowStub::now()"),", which returns the current time as seen by the workflow system. This is crucial because the actual time may not match your application's system clock."),(0,o.kt)("p",null,"Additionally, when measuring elapsed time in workflows (e.g., tracking how long an activity takes), always get your start time with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"$start = yield WorkflowStub::sideEffect(fn () => WorkflowStub::now());\n")),(0,o.kt)("p",null,"This ensures a checkpoint is created, preventing replay-related inconsistencies and guaranteeing accurate time calculations."))}p.isMDXComponent=!0}}]);