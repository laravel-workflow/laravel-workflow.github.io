"use strict";(self.webpackChunklaravel_workflow=self.webpackChunklaravel_workflow||[]).push([[3957],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(n),m=o,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||l;return n?a.createElement(f,r(r({ref:t},u),{},{components:n})):a.createElement(f,r({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,r=new Array(l);r[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:o,r[1]=i;for(var c=2;c<l;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9421:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>f,contentTitle:()=>d,default:()=>y,frontMatter:()=>p,metadata:()=>m,toc:()=>w});var a=n(7462),o=n(7294),l=n(3905);const r={simulatorWrapper:"simulatorWrapper_FH6A",expandButton:"expandButton_twmA",expanded:"expanded_RXFw",expandIcon:"expandIcon_e2Bu",simulatorContainer:"simulatorContainer_kSUT",slideDown:"slideDown_Nai8",simulatorHeader:"simulatorHeader_pSGN",simulatorTitle:"simulatorTitle_K1Ja",controls:"controls_FWGd",playButton:"playButton_g_Ml",resetButton:"resetButton_WsAb",fileTabs:"fileTabs_Z22D",fileTab:"fileTab_rJwF",active:"active_TE53",codeContainer:"codeContainer_cL_i",codeBlock:"codeBlock_EWlH",codeLine:"codeLine_MAV7",highlighted:"highlighted_QEa5",lineNumber:"lineNumber_EepU",lineContent:"lineContent_hKh9",dataFlow:"dataFlow_Qkb0",dataLabel:"dataLabel_vw3I",dataValue:"dataValue_MONd",outputSection:"outputSection__8ya",outputLabel:"outputLabel_fJxi",outputValue:"outputValue_PJjt",statusBar:"statusBar_XbG9",statusIndicator:"statusIndicator_Bjvf",idle:"idle_azX6",running:"running_cDHX",completed:"completed_YLL5",currentFileIndicator:"currentFileIndicator_fzxK"},i="idle",s="running",c="completed";function u(e){let{title:t="Hello World Simulator",inputValue:n="world"}=e;const[a,l]=(0,o.useState)(!1),[u,p]=(0,o.useState)(i),[d,m]=(0,o.useState)("workflow"),[f,w]=(0,o.useState)(-1),[k,y]=(0,o.useState)(null),[h,v]=(0,o.useState)(null),g=(0,o.useRef)(null),b=("workflow"===d?"use function Workflow\\activity;\nuse Workflow\\Workflow;\n\nclass MyWorkflow extends Workflow\n{\n    public function execute($name)\n    {\n        $result = yield activity(MyActivity::class, $name);\n\n        return $result;\n    }\n}":'use Workflow\\Activity;\n\nclass MyActivity extends Activity\n{\n    public function execute($name)\n    {\n        return "Hello, {$name}!";\n    }\n}').split("\n"),N=()=>{p(i),m("workflow"),w(-1),y(null),v(null),g.current&&clearTimeout(g.current)},E=e=>new Promise((t=>{g.current=setTimeout(t,e)}));return(0,o.useEffect)((()=>()=>{g.current&&clearTimeout(g.current)}),[]),o.createElement("div",{className:r.simulatorWrapper},o.createElement("button",{className:`${r.expandButton} ${a?r.expanded:""}`,onClick:()=>l(!a)},o.createElement("span",{className:r.expandIcon},a?"\u25bc":"\u25b6"),o.createElement("span",null,"Try it out!")),a&&o.createElement("div",{className:r.simulatorContainer},o.createElement("div",{className:r.simulatorHeader},o.createElement("h4",{className:r.simulatorTitle},t),o.createElement("div",{className:r.controls},o.createElement("button",{className:r.playButton,onClick:async()=>{N(),p(s),m("workflow"),w(6),v(n),await E(800),w(8),await E(1e3),w(-1),await E(50),m("activity"),w(5),await E(800),w(7),await E(1e3),w(-1),await E(50),m("workflow"),w(10),await E(800),y(`Hello, ${n}!`),p(c),w(-1)},disabled:u===s},u===s?"\u25b6\ufe0f Running...":"\u25b6 Play"),o.createElement("button",{className:r.resetButton,onClick:N,disabled:u===s},"\ud83d\udd04 Reset"))),o.createElement("div",{className:r.fileTabs},o.createElement("button",{className:`${r.fileTab} ${"workflow"===d?r.active:""}`,onClick:()=>u!==s&&m("workflow")},"MyWorkflow.php"),o.createElement("button",{className:`${r.fileTab} ${"activity"===d?r.active:""}`,onClick:()=>u!==s&&m("activity")},"MyActivity.php")),o.createElement("div",{className:r.codeContainer},o.createElement("pre",{className:r.codeBlock},b.map(((e,t)=>{const n=t+1,a=f===n;return o.createElement("div",{key:t,className:`${r.codeLine} ${a?r.highlighted:""}`},o.createElement("span",{className:r.lineNumber},n),o.createElement("span",{className:r.lineContent},e||" "))})))),null!==h&&u===s&&o.createElement("div",{className:r.dataFlow},o.createElement("span",{className:r.dataLabel},"$name ="),o.createElement("code",{className:r.dataValue},"'",h,"'")),null!==k&&o.createElement("div",{className:r.outputSection},o.createElement("span",{className:r.outputLabel},"Output:"),o.createElement("code",{className:r.outputValue},"'",k,"'")),o.createElement("div",{className:r.statusBar},o.createElement("span",{className:`${r.statusIndicator} ${r[u]}`},u===i&&"\u23f8\ufe0f Ready",u===s&&"\u25b6\ufe0f Running",u===c&&"\u2705 Completed"),u===s&&o.createElement("span",{className:r.currentFileIndicator},"Executing: ",o.createElement("strong",null,"workflow"===d?"MyWorkflow":"MyActivity")))))}const p={sidebar_position:4},d="Passing Data",m={unversionedId:"defining-workflows/passing-data",id:"defining-workflows/passing-data",title:"Passing Data",description:"You can pass data into a workflow via the start() method.",source:"@site/docs/defining-workflows/passing-data.md",sourceDirName:"defining-workflows",slug:"/defining-workflows/passing-data",permalink:"/docs/defining-workflows/passing-data",draft:!1,editUrl:"https://github.com/durable-workflow/durable-workflow.github.io/edit/main/docs/defining-workflows/passing-data.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Starting Workflows",permalink:"/docs/defining-workflows/starting-workflows"},next:{title:"Workflow Status",permalink:"/docs/defining-workflows/workflow-status"}},f={},w=[{value:"Output",id:"output",level:2},{value:"Models",id:"models",level:2},{value:"Dependency Injection",id:"dependency-injection",level:2}],k={toc:w};function y(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"passing-data"},"Passing Data"),(0,l.kt)("p",null,"You can pass data into a workflow via the ",(0,l.kt)("inlineCode",{parentName:"p"},"start()")," method."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use Workflow\\WorkflowStub;\n\n$workflow = WorkflowStub::make(MyWorkflow::class);\n$workflow->start('world');\n")),(0,l.kt)("p",null,"It will be passed as arguments to the workflow's ",(0,l.kt)("inlineCode",{parentName:"p"},"execute()")," method."),(0,l.kt)("p",null,"Similarly, you can pass data into an activity via the ",(0,l.kt)("inlineCode",{parentName:"p"},"activity()")," helper function."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use function Workflow\\activity;\nuse Workflow\\Workflow;\n\nclass MyWorkflow extends Workflow\n{\n    public function execute($name)\n    {\n        return yield activity(MyActivity::class, $name);\n    }\n}\n")),(0,l.kt)("p",null,"It will be passed as arguments to the activity's ",(0,l.kt)("inlineCode",{parentName:"p"},"execute()")," method"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},'use Workflow\\Activity;\n\nclass MyActivity extends Activity\n{\n    public function execute($name)\n    {\n        return "Hello, {$name}!";\n    }\n}\n')),(0,l.kt)(u,{mdxType:"PassingDataSimulator"}),(0,l.kt)("p",null,"In general, you should only pass small amounts of data in this manner. Rather than passing large amounts of data, you should write the data to the database, cache or file system. Then pass the key or file path to the workflow and activities. The activities can then use the key or file path to read the data."),(0,l.kt)("h2",{id:"output"},"Output"),(0,l.kt)("p",null,"Once the workflow has completed, you can retrieve the output using the ",(0,l.kt)("inlineCode",{parentName:"p"},"output()")," method."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"$workflow->output();\n=> 'Hello, world!'\n")),(0,l.kt)("h2",{id:"models"},"Models"),(0,l.kt)("p",null,"Passing in models works similarly to ",(0,l.kt)("inlineCode",{parentName:"p"},"SerializesModels"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use App\\Models\\User;\nuse function Workflow\\activity;\nuse Workflow\\Workflow;\n\nclass MyWorkflow extends Workflow\n{\n    public function execute(User $user)\n    {\n        return yield activity(MyActivity::class, $user->name);\n    }\n}\n")),(0,l.kt)("p",null,"When an Eloquent model is passed to a workflow or activity, only its ",(0,l.kt)("inlineCode",{parentName:"p"},"ModelIdentifier")," is serialized. This reduces the size of the payload, ensuring that your workflows remain efficient and performant."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'object(ModelIdentifier) {\n    id: 42,\n    class: "App\\Models\\User",\n    relations: [],\n    connection: "mysql"\n}\n')),(0,l.kt)("p",null,"When the workflow or activity runs, it will retrieve the complete model instance, including any loaded relationships, from the database. If you wish to prevent extra database calls during the execution of a workflow or activity, consider converting the model to an array before passing it."),(0,l.kt)("h2",{id:"dependency-injection"},"Dependency Injection"),(0,l.kt)("p",null,"In addition to passing data, you are able to type-hint dependencies on the workflow or activity ",(0,l.kt)("inlineCode",{parentName:"p"},"execute()")," methods. The Laravel service container will automatically inject those dependencies."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"use Illuminate\\Contracts\\Foundation\\Application;\nuse Workflow\\Workflow;\n\nclass MyWorkflow extends Workflow\n{\n    public function execute(Application $app)\n    {\n        if ($app->runningInConsole()) {\n            // ...\n        }\n    }\n}\n")))}y.isMDXComponent=!0}}]);